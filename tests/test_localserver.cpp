/*
********************************************************************************
**____________________________________________________________________________**
**_____/\/\/\/\/\___/\/\____________/\/\/\/\/\/\_/\/\__/\/\__/\/\_____________**
**____/\/\____/\/\_______/\/\__/\/\____/\/\___________/\/\__/\/\__/\/\/\/\/\__**
**___/\/\/\/\/\___/\/\____/\/\/\______/\/\_____/\/\__/\/\__/\/\______/\/\_____**
**__/\/\_________/\/\____/\/\/\______/\/\_____/\/\__/\/\__/\/\____/\/\________**
**_/\/\_________/\/\__/\/\__/\/\____/\/\_____/\/\__/\/\__/\/\__/\/\/\/\/\_____**
**____________________________________________________________________________**
**                                                                            **
**----- Author --------------{ PixTillz }-------------------------------------**
**----- File ----------------{ test_localserver.cpp }-------------------------**
**----- Created -------------{ 2021-09-09 15:18:34 }--------------------------**
**----- Updated -------------{ 2021-09-09 18:32:05 }--------------------------**
********************************************************************************
*/

#include "../incs/LocalServer.hpp"

#include <fcntl.h>

int main(int argc, char const *argv[])
{
	LocalServer *ls;
	std::string				port;
	std::string				password;
	std::string				ip_ver;

	if (argc != 4) {
		DEBUG_DISP(COUT, "Usage: ./test_localserver port password ip_ver[4/6]");
		return (1);
	}
	port = argv[argc - 3];
	password = argv[argc - 2];
	ip_ver = argv[argc - 1];
	if (ip_ver.compare("4") && ip_ver.compare("6"))
	{
		DEBUG_DISP(COUT, "Usage: ./test_localserver port password ip_ver[4/6]");
		return (1);
	}
	ls = new LocalServer(port, (ip_ver == "4" ? AF_INET : AF_INET6), password);

	ls->run();

	return (0);
}
